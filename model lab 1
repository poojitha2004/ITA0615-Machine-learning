# Import required libraries
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns

from sklearn.model_selection import train_test_split
from sklearn.naive_bayes import GaussianNB
from sklearn.metrics import accuracy_score, confusion_matrix, classification_report

# ------------------------------------------------
# Inbuilt Dataset (Credit Score Prediction)
# ------------------------------------------------
data = {
    "Age": [25, 30, 35, 40, 28, 45, 50, 32, 38, 29],
    "Income": [40000, 55000, 70000, 80000, 48000, 90000, 100000, 60000, 75000, 52000],
    "Occupation": ["Engineer", "Teacher", "Engineer", "Manager", "Teacher",
                   "Manager", "Manager", "Engineer", "Engineer", "Teacher"],
    "CreditScore": [650, 700, 720, 780, 680, 800, 820, 710, 740, 690],
    "LoanApproved": [0, 1, 1, 1, 0, 1, 1, 1, 1, 0]   # Target (0 = No, 1 = Yes)
}

df = pd.DataFrame(data)

# ------------------------------------------------
# a) Print first five rows
# ------------------------------------------------
print("First five rows of the dataset:")
print(df.head())

# ------------------------------------------------
# b) Basic statistical computations
# ------------------------------------------------
print("\nStatistical summary:")
print(df.describe())

# ------------------------------------------------
# c) Columns and their data types
# ------------------------------------------------
print("\nColumns and data types:")
print(df.dtypes)

# ------------------------------------------------
# d) Detect and replace null values with mode
# ------------------------------------------------
print("\nNull values before replacement:")
print(df.isnull().sum())

for col in df.columns:
    if df[col].isnull().sum() > 0:
        df[col].fillna(df[col].mode()[0], inplace=True)

print("\nNull values after replacement:")
print(df.isnull().sum())

# ------------------------------------------------
# e) Boxplot (Credit Scores Based on Occupation)
# ------------------------------------------------
plt.figure(figsize=(8, 5))
sns.boxplot(x="Occupation", y="CreditScore", data=df)
plt.title("Credit Scores Based on Occupation")
plt.xlabel("Occupation")
plt.ylabel("Credit Score")
plt.show()

# ------------------------------------------------
# Encode categorical variable (Occupation)
# ------------------------------------------------
df["Occupation"] = df["Occupation"].map({
    "Engineer": 0,
    "Teacher": 1,
    "Manager": 2
})

# ------------------------------------------------
# f) Train-Test Split
# ------------------------------------------------
X = df.drop("LoanApproved", axis=1)
y = df["LoanApproved"]

X_train, X_test, y_train, y_test = train_test_split(
    X, y, test_size=0.3, random_state=42
)

# ------------------------------------------------
# g) Fit Naive Bayes Classifier
# ------------------------------------------------
model = GaussianNB()
model.fit(X_train, y_train)

# ------------------------------------------------
# h) Predict the model
# ------------------------------------------------
y_pred = model.predict(X_test)

print("\nPredicted values:", y_pred)
print("Actual values:   ", y_test.values)

# ------------------------------------------------
# Model Performance
# ------------------------------------------------
print("\nAccuracy:", accuracy_score(y_test, y_pred))
print("\nConfusion Matrix:")
print(confusion_matrix(y_test, y_pred))
print("\nClassification Report:")
print(classification_report(y_test, y_pred))
